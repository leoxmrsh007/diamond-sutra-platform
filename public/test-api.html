/**
 * æµ‹è¯•APIç«¯ç‚¹å’Œæ•°æ®åº“è¿æ¥
 */

async function testAPIEndpoints() {
  console.log('ğŸ§ª å¼€å§‹æµ‹è¯•APIç«¯ç‚¹...\n');

  // æµ‹è¯•1: åŸºç¡€APIå¥åº·æ£€æŸ¥
  console.log('1ï¸âƒ£ æµ‹è¯•åŸºç¡€API...');
  try {
    const res = await fetch('/api/research');
    console.log(`âœ… /api/research çŠ¶æ€: ${res.status}`);
    const data = await res.json();
    console.log(`   è¿”å›æ•°æ®ç±»å‹: ${typeof data}`);
    console.log(`   æ•°æ®:`, data);
  } catch (error) {
    console.error('âŒ /api/research å¤±è´¥:', error);
  }

  // æµ‹è¯•2: ç‰ˆæœ¬å¯¹ç…§API
  console.log('\n2ï¸âƒ£ æµ‹è¯•ç‰ˆæœ¬å¯¹ç…§API...');
  try {
    const res = await fetch('/api/research/versions?chapter=1&limit=3');
    console.log(`âœ… /api/research/versions çŠ¶æ€: ${res.status}`);
    const data = await res.json();
    console.log(`   æ•°æ®:`, data);
    if (data.metadata?.availableVersions) {
      console.log(`   å¯ç”¨ç‰ˆæœ¬æ•°: ${data.metadata.availableVersions.length}`);
      data.metadata.availableVersions.forEach((v: any) => {
        console.log(`      - ${v.versionName} (${v.versionType})`);
      });
    }
  } catch (error) {
    console.error('âŒ /api/research/versions å¤±è´¥:', error);
  }

  // æµ‹è¯•3: éš¾ç‚¹å­—API
  console.log('\n3ï¸âƒ£ æµ‹è¯•éš¾ç‚¹å­—API...');
  try {
    const res = await fetch('/api/difficult-characters?scripture=diamond-sutra');
    console.log(`âœ… /api/difficult-characters çŠ¶æ€: ${res.status}`);
    const data = await res.json();
    console.log(`   æ•°æ®:`, data);
  } catch (error) {
    console.error('âŒ /api/difficult-characters å¤±è´¥:', error);
  }

  // æµ‹è¯•4: æˆè¯­API
  console.log('\n4ï¸âƒ£ æµ‹è¯•æˆè¯­API...');
  try {
    const res = await fetch('/api/idioms?scripture=diamond-sutra');
    console.log(`âœ… /api/idioms çŠ¶æ€: ${res.status}`);
    const data = await res.json();
    console.log(`   æ•°æ®:`, data);
  } catch (error) {
    console.error('âŒ /api/idioms å¤±è´¥:', error);
  }

  console.log('\nâœ¨ APIæµ‹è¯•å®Œæˆï¼\n');
  console.log('ğŸ’¡ å»ºè®®ï¼š');
  console.log('1. å¦‚æœæ‰€æœ‰APIéƒ½æ­£å¸¸ï¼Œé‡å¯å¼€å‘æœåŠ¡å™¨');
  console.log('2. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°çš„ç½‘ç»œè¯·æ±‚');
  console.log('3. ç¡®è®¤ç¯å¢ƒå˜é‡DATABASE_URLæ­£ç¡®é…ç½®');
}

// åœ¨æµè§ˆå™¨ä¸­è¿è¡Œ
testAPIEndpoints();
